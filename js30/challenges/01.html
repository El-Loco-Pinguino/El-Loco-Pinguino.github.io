<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>01 - Drum Kit</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/01.css">
  </head>
  <body>
    <div class="keys">
        <div data-key="65" class="key">
          <kbd>A</kbd>
          <span class="sound">Chat</span>
        </div>
        <div data-key="90" class="key">
          <kbd>Z</kbd>
          <span class="sound">Poule</span>
        </div>
        <div data-key="69" class="key">
          <kbd>E</kbd>
          <span class="sound">Vache</span>
        </div>
        <div data-key="82" class="key">
          <kbd>R</kbd>
          <span class="sound">Corbeau</span>
        </div>
        <div data-key="84" class="key">
          <kbd>T</kbd>
          <span class="sound">Chien</span>
        </div>
        <div data-key="89" class="key">
          <kbd>Y</kbd>
          <span class="sound">Grenouille</span>
        </div>
        <div data-key="85" class="key">
          <kbd>U</kbd>
          <span class="sound">Cheval</span>
        </div>
        <div data-key="73" class="key">
          <kbd>I</kbd>
          <span class="sound">Mouton</span>
        </div>
        <div data-key="79" class="key">
          <kbd>O</kbd>
          <span class="sound">Loup</span>
        </div>
      </div>
    
      <audio data-key="65" src="./assets/Cat.ogg"></audio>
      <audio data-key="90" src="./assets/Chicken.ogg"></audio>
      <audio data-key="69" src="./assets/Cow.ogg"></audio>
      <audio data-key="82" src="./assets/Crow.ogg"></audio>
      <audio data-key="84" src="./assets/Dog.ogg"></audio>
      <audio data-key="89" src="./assets/Frog.ogg"></audio>
      <audio data-key="85" src="./assets/Horse.ogg"></audio>
      <audio data-key="73" src="./assets/Sheep.ogg"></audio>
      <audio data-key="79" src="./assets/Wolf.ogg"></audio>    

        <script>
            function playSound(e) {
                const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`)
                const key = document.querySelector(`.key[data-key="${e.keyCode}"]`)
                if (!audio) return
                audio.currentTime = 0
                audio.play()
                key.classList.add("playing")
            }


            function removeTransition(e) {
                if (e.propertyName !== "transform") return
                this.classList.remove("playing")
            }

            const keys = document.querySelectorAll(".key")
            keys.forEach(key => key.addEventListener("transitionend", removeTransition))
            window.addEventListener("keydown", playSound)
        </script> 
  </body>
</html>